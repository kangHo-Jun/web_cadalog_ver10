# ğŸ“š Vercel ë°°í¬ í•™ìŠµ ë…¸íŠ¸

> **ì‘ì„±ì¼**: 2026-01-26  
> **í”„ë¡œì íŠ¸**: Cafe24 Web Catalog  
> **ì£¼ì œ**: Vercel ì„œë²„ë¦¬ìŠ¤ ë°°í¬ì™€ ìƒíƒœ ê´€ë¦¬

---

## ğŸ¯ ì˜¤ëŠ˜ ê²ªì€ í•µì‹¬ ë¬¸ì œ

**ì¦ìƒ**: ë¡œì»¬ì—ì„œëŠ” ì •ìƒ ì‘ë™í•˜ë˜ Cafe24 API ì—°ë™ì´ Vercel ë°°í¬ í›„ `invalid_grant` ì—ëŸ¬ ë°œìƒ

**ê·¼ë³¸ ì›ì¸**: Vercel ì„œë²„ë¦¬ìŠ¤ í™˜ê²½ì˜ **Stateless(ë¬´ìƒíƒœ)** íŠ¹ì„±ì„ ì´í•´í•˜ì§€ ëª»í•¨

---

## 1ï¸âƒ£ Vercel ë°°í¬ì˜ í•µì‹¬ êµ¬ì¡°

### Vercelì´ë€?

**Vercel = ì„œë²„ë¦¬ìŠ¤ í”Œë«í¼ + CDN + ìë™ ë°°í¬**

```
GitHub Repository
       â†“ (Push)
Vercel Build System
       â†“ (ìë™ ë¹Œë“œ)
Serverless Functions (AWS Lambda ê¸°ë°˜)
       â†“
CDN (ì „ ì„¸ê³„ ì—£ì§€ ë„¤íŠ¸ì›Œí¬)
       â†“
ì‚¬ìš©ì
```

### í•µì‹¬ íŠ¹ì§•

| íŠ¹ì§• | ì„¤ëª… | ì˜í–¥ |
|------|------|------|
| **Serverless** | ìš”ì²­ë§ˆë‹¤ ìƒˆë¡œìš´ í•¨ìˆ˜ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± | ë©”ëª¨ë¦¬/íŒŒì¼ ì‹œìŠ¤í…œ ì´ˆê¸°í™” |
| **Stateless** | ìš”ì²­ ê°„ ìƒíƒœ ê³µìœ  ë¶ˆê°€ | íŒŒì¼ ì €ì¥ ë¶ˆê°€ëŠ¥ |
| **Read-only FS** | `/` ë””ë ‰í† ë¦¬ ì½ê¸° ì „ìš© | `/tmp`ë§Œ ì“°ê¸° ê°€ëŠ¥ (ì„ì‹œ) |
| **Cold Start** | ì²« ìš”ì²­ ì‹œ í•¨ìˆ˜ ì´ˆê¸°í™” ì‹œê°„ ì†Œìš” | ì„±ëŠ¥ ê³ ë ¤ í•„ìš” |

### ë¡œì»¬ vs Vercel ì°¨ì´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë¡œì»¬ ê°œë°œ í™˜ê²½ (Traditional Server)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… ì„œë²„ í”„ë¡œì„¸ìŠ¤ê°€ ê³„ì† ì‹¤í–‰ë¨                            â”‚
â”‚ âœ… íŒŒì¼ ì‹œìŠ¤í…œì— ë°ì´í„° ì €ì¥ ê°€ëŠ¥                         â”‚
â”‚ âœ… ë©”ëª¨ë¦¬ì— ë³€ìˆ˜ ìœ ì§€ ê°€ëŠ¥                                â”‚
â”‚ âœ… í•œ ë²ˆ ë¡œë“œí•œ í† í°ì„ ê³„ì† ì‚¬ìš©                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Vercel í”„ë¡œë•ì…˜ (Serverless)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âŒ ìš”ì²­ë§ˆë‹¤ ìƒˆ í•¨ìˆ˜ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±                         â”‚
â”‚ âŒ íŒŒì¼ ì €ì¥í•´ë„ ë‹¤ìŒ ìš”ì²­ì—ì„œ ì‚¬ë¼ì§                     â”‚
â”‚ âŒ ë©”ëª¨ë¦¬ ë³€ìˆ˜ë„ ìš”ì²­ ì¢…ë£Œ ì‹œ ì†Œë©¸                        â”‚
â”‚ âŒ í† í°ì„ ì €ì¥í•  ì˜êµ¬ ì €ì¥ì†Œ í•„ìš”                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2ï¸âƒ£ ì‹œí–‰ì°©ì˜¤ì˜ ì›ì¸ ë¶„ì„

### ë¬¸ì œ 1: íŒŒì¼ ê¸°ë°˜ í† í° ì €ì¥ ì‹œë„

**ì´ˆê¸° ì½”ë“œ** (`cafe24-auth.ts`):
```typescript
// âŒ ë¡œì»¬ì—ì„œëŠ” ì‘ë™, Vercelì—ì„œëŠ” ì‹¤íŒ¨
const TOKEN_PATH = path.join(process.cwd(), '.tokens.json');
fs.writeFileSync(TOKEN_PATH, JSON.stringify(tokens));
```

**ì™œ ì‹¤íŒ¨í–ˆë‚˜?**
1. Vercelì€ `/` ë””ë ‰í† ë¦¬ê°€ **ì½ê¸° ì „ìš©**
2. `/tmp`ì— ì €ì¥í•´ë„ **ì¸ìŠ¤í„´ìŠ¤ ì¬ì‹œì‘ ì‹œ ì‚­ì œ**
3. ì—¬ëŸ¬ ì„œë²„ë¦¬ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ê°€ **íŒŒì¼ì„ ê³µìœ í•˜ì§€ ëª»í•¨**

```
ìš”ì²­ 1 â†’ ì¸ìŠ¤í„´ìŠ¤ A â†’ /tmp/.tokens.json ì €ì¥
ìš”ì²­ 2 â†’ ì¸ìŠ¤í„´ìŠ¤ B â†’ /tmp/.tokens.json ì—†ìŒ! âŒ
```

### ë¬¸ì œ 2: í™˜ê²½ ë³€ìˆ˜ë§Œìœ¼ë¡œ í•´ê²° ì‹œë„

**ì‹œë„í•œ ë°©ë²•**:
```bash
# Vercel í™˜ê²½ ë³€ìˆ˜ì— í† í° ì €ì¥
CAFE24_ACCESS_TOKEN=xxx
CAFE24_REFRESH_TOKEN=yyy
```

**ì™œ ë¶€ì¡±í–ˆë‚˜?**
- Cafe24 Access Tokenì€ **2ì‹œê°„ë§ˆë‹¤ ë§Œë£Œ**
- Refresh Tokenìœ¼ë¡œ ê°±ì‹ í•˜ë©´ **ìƒˆ Refresh Token ë°œê¸‰**
- í™˜ê²½ ë³€ìˆ˜ëŠ” **ì¬ë°°í¬ ì—†ì´ ì—…ë°ì´íŠ¸ ë¶ˆê°€ëŠ¥**

```
2ì‹œê°„ í›„ â†’ Access Token ë§Œë£Œ
  â†“
Refresh Tokenìœ¼ë¡œ ê°±ì‹ 
  â†“
ìƒˆ Refresh Token ë°œê¸‰ë¨
  â†“
í™˜ê²½ ë³€ìˆ˜ëŠ” ì—¬ì „íˆ ì˜›ë‚  ê°’ âŒ
  â†“
ë‹¤ìŒ ê°±ì‹  ì‹œ invalid_grant ì—ëŸ¬!
```

---

## 3ï¸âƒ£ Redis(Vercel KV)ê°€ ì™œ í•„ìš”í–ˆëŠ”ì§€?

### Redisì˜ ì—­í• 

**Redis = ì´ˆê³ ì† Key-Value ì €ì¥ì†Œ**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Vercel KV (Upstash Redis)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… ëª¨ë“  ì„œë²„ë¦¬ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ê°€ ê³µìœ                           â”‚
â”‚ âœ… ë°ì´í„° ì˜êµ¬ ì €ì¥ (ì¬ì‹œì‘í•´ë„ ìœ ì§€)                     â”‚
â”‚ âœ… ì½ê¸°/ì“°ê¸° ì†ë„ ë§¤ìš° ë¹ ë¦„ (ms ë‹¨ìœ„)                     â”‚
â”‚ âœ… ê¸€ë¡œë²Œ ë³µì œ (ì „ ì„¸ê³„ ì–´ë””ì„œë“  ë¹ ë¦„)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í† í° ê°±ì‹  í”Œë¡œìš° (Redis ì‚¬ìš©)

```
ì‚¬ìš©ì ìš”ì²­
  â†“
Serverless Function A ì‹¤í–‰
  â†“
Redisì—ì„œ í† í° ì¡°íšŒ
  â†“
Access Token ë§Œë£Œ í™•ì¸
  â†“
Refresh Tokenìœ¼ë¡œ ìƒˆ í† í° ë°œê¸‰
  â†“
ìƒˆ í† í°ì„ Redisì— ì €ì¥ âœ…
  â†“
ë‹¤ìŒ ìš”ì²­ (ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤)
  â†“
Serverless Function B ì‹¤í–‰
  â†“
Redisì—ì„œ ìµœì‹  í† í° ì¡°íšŒ âœ… (ê³µìœ ë¨!)
```

### ëŒ€ì•ˆ ë¹„êµ

| ì €ì¥ì†Œ | ì†ë„ | ì˜êµ¬ì„± | ê³µìœ  | ë¹„ìš© | ì í•©ì„± |
|--------|------|--------|------|------|--------|
| **íŒŒì¼ ì‹œìŠ¤í…œ** | ë¹ ë¦„ | âŒ | âŒ | ë¬´ë£Œ | âŒ |
| **í™˜ê²½ ë³€ìˆ˜** | ë¹ ë¦„ | âœ… | âœ… | ë¬´ë£Œ | âš ï¸ (ì •ì  ë°ì´í„°ë§Œ) |
| **Redis (KV)** | ë§¤ìš° ë¹ ë¦„ | âœ… | âœ… | ë¬´ë£Œ í‹°ì–´ | âœ… **ìµœì ** |
| **PostgreSQL** | ë³´í†µ | âœ… | âœ… | ë¬´ë£Œ í‹°ì–´ | ğŸ†— (ê³¼í•œ ì„ íƒ) |

---

## 4ï¸âƒ£ GitHubì—ì„œ ì§ì ‘ ë°°í¬í•  ìˆ˜ëŠ” ì—†ì—ˆëŠ”ì§€?

### GitHub Pages vs Vercel

| ê¸°ëŠ¥ | GitHub Pages | Vercel |
|------|--------------|--------|
| **ì •ì  ì‚¬ì´íŠ¸** | âœ… | âœ… |
| **ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜** | âŒ | âœ… |
| **í™˜ê²½ ë³€ìˆ˜** | âŒ | âœ… |
| **ìë™ ë¹Œë“œ** | âœ… (Jekyll) | âœ… (Next.js ë“±) |
| **API ë¼ìš°íŠ¸** | âŒ | âœ… |

**ê²°ë¡ **: ìš°ë¦¬ í”„ë¡œì íŠ¸ëŠ” **Cafe24 APIë¥¼ í˜¸ì¶œí•˜ëŠ” ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜**ê°€ í•„ìš”í•˜ë¯€ë¡œ GitHub Pagesë¡œëŠ” ë¶ˆê°€ëŠ¥

### GitHub Actions + ë‹¤ë¥¸ í˜¸ìŠ¤íŒ…?

**ê°€ëŠ¥í•œ ì¡°í•©**:
```
GitHub â†’ GitHub Actions (ë¹Œë“œ) â†’ AWS Lambda (ë°°í¬)
GitHub â†’ GitHub Actions (ë¹Œë“œ) â†’ Google Cloud Run (ë°°í¬)
GitHub â†’ GitHub Actions (ë¹Œë“œ) â†’ Netlify (ë°°í¬)
```

**Vercelì„ ì„ íƒí•œ ì´ìœ **:
- Next.jsì™€ **ì™„ë²½í•œ í†µí•©** (Vercelì´ Next.js ê°œë°œì‚¬)
- **ìë™ ë°°í¬** (GitHub í‘¸ì‹œë§Œ í•˜ë©´ ë)
- **ë¬´ë£Œ í‹°ì–´** ì¶©ë¶„
- **KV ì €ì¥ì†Œ** ë‚´ì¥

---

## 5ï¸âƒ£ Vercelì˜ ì—­í•  (ë°ì´í„°ë¥¼ ì €ì¥?)

### Vercelì˜ 3ê°€ì§€ ì—­í• 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ë¹Œë“œ & ë°°í¬ ìë™í™”                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ GitHub Push â†’ ìë™ ë¹Œë“œ â†’ ë°°í¬ â†’ URL ìƒì„±                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜ ì‹¤í–‰ í™˜ê²½                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ /api/products â†’ AWS Lambda í•¨ìˆ˜ ì‹¤í–‰                     â”‚
â”‚ /api/categories â†’ AWS Lambda í•¨ìˆ˜ ì‹¤í–‰                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ì •ì  íŒŒì¼ CDN í˜¸ìŠ¤íŒ…                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ HTML, CSS, JS â†’ ì „ ì„¸ê³„ ì—£ì§€ ì„œë²„ì— ìºì‹±                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Vercelì€ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ”ê°€?

**âŒ ê¸°ë³¸ì ìœ¼ë¡œëŠ” ì €ì¥í•˜ì§€ ì•ŠìŒ**

- Vercelì€ **ì½”ë“œ ì‹¤í–‰ í™˜ê²½**ì¼ ë¿
- ë°ì´í„° ì €ì¥ì€ **ë³„ë„ ì„œë¹„ìŠ¤ í•„ìš”**:
  - **Vercel KV** (Redis) - ìš°ë¦¬ê°€ ì‚¬ìš©
  - **Vercel Postgres** (ê´€ê³„í˜• DB)
  - **Vercel Blob** (íŒŒì¼ ì €ì¥)
  - ì™¸ë¶€ DB (Supabase, PlanetScale ë“±)

---

## 6ï¸âƒ£ GitHubì™€ Vercel ì—°ê²°

### ì—°ê²° ë°©ì‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   GitHub     â”‚ â—„â”€â”€â”€â”€â”€â–º â”‚   Vercel     â”‚
â”‚  Repository  â”‚  Webhook â”‚   Project    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                        â”‚
       â”‚ Push                   â”‚ Deploy
       â–¼                        â–¼
   main ë¸Œëœì¹˜            Production URL
```

### ìë™ ë°°í¬ í”Œë¡œìš°

```
1. ê°œë°œìê°€ ì½”ë“œ ìˆ˜ì •
   â†“
2. git push origin main
   â†“
3. GitHub â†’ Vercel Webhook ì „ì†¡
   â†“
4. Vercelì´ ìë™ìœ¼ë¡œ:
   - ì½”ë“œ í´ë¡ 
   - npm install
   - npm run build
   - ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜ ë°°í¬
   - CDNì— ì •ì  íŒŒì¼ ì—…ë¡œë“œ
   â†“
5. ìƒˆ URL ìƒì„± (ë˜ëŠ” ê¸°ì¡´ URL ì—…ë°ì´íŠ¸)
   â†“
6. ë°°í¬ ì™„ë£Œ ì•Œë¦¼
```

### í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬

```
ë¡œì»¬ ê°œë°œ:
  .env.local (Gitì— ì»¤ë°‹ ì•ˆ í•¨)
    â†“
Vercel í”„ë¡œë•ì…˜:
  Vercel Dashboard > Settings > Environment Variables
    â†“
  ë¹Œë“œ ì‹œ ìë™ ì£¼ì…
```

---

## 7ï¸âƒ£ ë¡œì»¬ vs Vercel ì‹œí–‰ì°©ì˜¤ ì •ë¦¬

### íƒ€ì„ë¼ì¸

| ì‹œê°„ | ìƒí™© | ë¬¸ì œ | í•´ê²° |
|------|------|------|------|
| **ë¡œì»¬ ê°œë°œ** | âœ… ì •ìƒ ì‘ë™ | - | - |
| **Vercel ì²« ë°°í¬** | âŒ "ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ" | ì—ëŸ¬ ë©”ì‹œì§€ ìˆ¨ê²¨ì§ | `ProductTable.tsx` fetcher ìˆ˜ì • |
| **ì—ëŸ¬ í™•ì¸** | âŒ `invalid_grant` | í† í° ë§Œë£Œ | ìƒˆ í† í° ë°œê¸‰ |
| **í† í° ì—…ë°ì´íŠ¸** | âŒ 2ì‹œê°„ í›„ ì¬ë°œìƒ | íŒŒì¼ ì €ì¥ ì‹¤íŒ¨ | `/tmp` ì‹œë„ |
| **`/tmp` ì‚¬ìš©** | âš ï¸ ê°„í—ì  ì‹¤íŒ¨ | ì¸ìŠ¤í„´ìŠ¤ ê°„ ê³µìœ  ì•ˆ ë¨ | Vercel KV ë„ì… |
| **Vercel KV** | âœ… ì™„ë²½ í•´ê²° | - | - |

### í•µì‹¬ êµí›ˆ

```
ë¡œì»¬ í™˜ê²½ = ì „í†µì ì¸ ì„œë²„ (Stateful)
  â†“
Vercel = ì„œë²„ë¦¬ìŠ¤ (Stateless)
  â†“
ìƒíƒœ ì €ì¥ì´ í•„ìš”í•˜ë©´ â†’ ì™¸ë¶€ ì €ì¥ì†Œ í•„ìˆ˜!
```

---

## ğŸ“ ë°°ìš´ í•µì‹¬ ê°œë…

### 1. Serverlessì˜ ë³¸ì§ˆ

**"ì„œë²„ê°€ ì—†ë‹¤"ê°€ ì•„ë‹ˆë¼ "ì„œë²„ë¥¼ ì‹ ê²½ ì“°ì§€ ì•ŠëŠ”ë‹¤"**

- ìš”ì²­ë§ˆë‹¤ í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ê³  ì¢…ë£Œë¨
- ìƒíƒœë¥¼ ìœ ì§€í•˜ë ¤ë©´ **ì™¸ë¶€ ì €ì¥ì†Œ** í•„ìˆ˜
- íŒŒì¼ ì‹œìŠ¤í…œì€ **ì„ì‹œ ì €ì¥ì†Œ**ë¡œë§Œ ì‚¬ìš©

### 2. Stateless Architecture

```
ì „í†µì ì¸ ì„œë²„:
  ë©”ëª¨ë¦¬ì— ë³€ìˆ˜ ì €ì¥ â†’ ê³„ì† ìœ ì§€ âœ…

ì„œë²„ë¦¬ìŠ¤:
  ë©”ëª¨ë¦¬ì— ë³€ìˆ˜ ì €ì¥ â†’ ìš”ì²­ ëë‚˜ë©´ ì†Œë©¸ âŒ
  
í•´ê²°ì±…:
  Redis, DB ë“± ì™¸ë¶€ ì €ì¥ì†Œ ì‚¬ìš© âœ…
```

### 3. OAuth í† í° ê´€ë¦¬

**í† í° íŠ¹ì„±**:
- Access Token: ì§§ì€ ìˆ˜ëª… (2ì‹œê°„)
- Refresh Token: ê¸´ ìˆ˜ëª… (2ì£¼), í•˜ì§€ë§Œ ê°±ì‹  ì‹œ ë³€ê²½ë¨

**ì„œë²„ë¦¬ìŠ¤ í™˜ê²½ì—ì„œì˜ í•´ê²°ì±…**:
```
1. í™˜ê²½ ë³€ìˆ˜ì— ì´ˆê¸° í† í° ì €ì¥
2. Redisì— í˜„ì¬ í† í° ì €ì¥
3. ë§Œë£Œ ì‹œ ìë™ ê°±ì‹ 
4. ìƒˆ í† í°ì„ Redisì— ì—…ë°ì´íŠ¸
5. ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ê°€ Redisì—ì„œ ìµœì‹  í† í° ì¡°íšŒ
```

### 4. ë°°í¬ í™˜ê²½ ì°¨ì´ ì´í•´

| í•­ëª© | ë¡œì»¬ | Vercel |
|------|------|--------|
| **íŒŒì¼ ì‹œìŠ¤í…œ** | ì½ê¸°/ì“°ê¸° ììœ  | ì½ê¸° ì „ìš© (+ /tmp ì„ì‹œ) |
| **í”„ë¡œì„¸ìŠ¤** | ê³„ì† ì‹¤í–‰ | ìš”ì²­ë§ˆë‹¤ ìƒì„±/ì¢…ë£Œ |
| **í™˜ê²½ ë³€ìˆ˜** | `.env.local` | Vercel Dashboard |
| **ë””ë²„ê¹…** | ì½˜ì†” ì§ì ‘ í™•ì¸ | Vercel Logs í™•ì¸ |

---

## ğŸ’¡ ì‹¤ì „ íŒ

### 1. ì„œë²„ë¦¬ìŠ¤ ê°œë°œ ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ìƒíƒœ ì €ì¥ì´ í•„ìš”í•œê°€? â†’ Redis/DB ê³ ë ¤
- [ ] íŒŒì¼ ì—…ë¡œë“œê°€ ìˆëŠ”ê°€? â†’ Blob Storage í•„ìš”
- [ ] í™˜ê²½ ë³€ìˆ˜ ì„¤ì •í–ˆëŠ”ê°€? â†’ Vercel Dashboard í™•ì¸
- [ ] ë¡œì»¬ê³¼ í”„ë¡œë•ì…˜ ë™ì‘ì´ ë‹¤ë¥¸ê°€? â†’ ì„œë²„ë¦¬ìŠ¤ íŠ¹ì„± ì¬í™•ì¸

### 2. ë””ë²„ê¹… ì „ëµ

```
1. ë¡œì»¬ì—ì„œ ë¨¼ì € ì™„ë²½íˆ ì‘ë™ì‹œí‚¤ê¸°
2. ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™” (try-catch, ë¡œê·¸)
3. Vercel ë°°í¬ í›„ Logs í™•ì¸
4. í™˜ê²½ ë³€ìˆ˜ ëˆ„ë½ ì—¬ë¶€ ì²´í¬
5. ì„œë²„ë¦¬ìŠ¤ ì œì•½ì‚¬í•­ ì¬í™•ì¸
```

### 3. ë¹„ìš© ìµœì í™”

**Vercel ë¬´ë£Œ í‹°ì–´ í•œë„**:
- Serverless Functions: 100GB-ì‹œê°„/ì›”
- KV: 30,000 ìš”ì²­/ì›”
- Bandwidth: 100GB/ì›”

**ì´ˆê³¼ ë°©ì§€ íŒ**:
- ë¶ˆí•„ìš”í•œ API í˜¸ì¶œ ì¤„ì´ê¸°
- ìºì‹± ì ê·¹ í™œìš©
- ì´ë¯¸ì§€ ìµœì í™”

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [Vercel Serverless Functions ê³µì‹ ë¬¸ì„œ](https://vercel.com/docs/functions)
- [Vercel KV ê°€ì´ë“œ](https://vercel.com/docs/storage/vercel-kv)
- [Next.js ë°°í¬ ìµœì í™”](https://nextjs.org/docs/deployment)
- [OAuth 2.0 í† í° ê´€ë¦¬ Best Practices](https://oauth.net/2/)

---

## ğŸ¯ ë‹¤ìŒ í•™ìŠµ ëª©í‘œ

1. **Edge Functions** ì´í•´í•˜ê¸°
2. **Middleware** í™œìš©ë²•
3. **ISR (Incremental Static Regeneration)** ì ìš©
4. **Vercel Analytics** ì„¤ì •
5. **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§** ë„êµ¬ í™œìš©

---

## 8ï¸âƒ£ Redis ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤ì „ ê²½í—˜ (2026-01-27)

### ë°°ê²½: Vercel KV ì„œë¹„ìŠ¤ ì¢…ë£Œ

**ìƒí™©**:
- Vercelì´ ìì²´ KV ì„œë¹„ìŠ¤ë¥¼ ì¢…ë£Œí•˜ê³  ë§ˆì¼“í”Œë ˆì´ìŠ¤ë¡œ í†µí•©
- ê¸°ì¡´ `@vercel/kv` íŒ¨í‚¤ì§€ê°€ deprecated ë¨
- ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ëŠ” Upstash Redis ë˜ëŠ” ì¼ë°˜ Redis ì‚¬ìš© í•„ìš”

### ë¬¸ì œ ë°œê²¬ ê³¼ì •

#### 1ë‹¨ê³„: ì´ˆê¸° ë°°í¬ ì‹¤íŒ¨
```
ì¦ìƒ: 500 Internal Server Error
ë¡œê·¸: KV_REST_API_URL is not defined
ì›ì¸: @vercel/kvê°€ ìš”êµ¬í•˜ëŠ” í™˜ê²½ ë³€ìˆ˜ ì—†ìŒ
```

#### 2ë‹¨ê³„: Storage ì˜µì…˜ í™•ì¸
```
Vercel Dashboard â†’ Storage â†’ Create Database
ë°œê²¬: "KV" ì˜µì…˜ì´ ì—†ìŒ!
ëŒ€ì‹ : Redis (Marketplace) ì˜µì…˜ë§Œ ì¡´ì¬
```

**Vercel Storage êµ¬ì¡° ë³€ê²½**:
```
ê³¼ê±° (2024ë…„ ì´ì „):
â”œâ”€â”€ Vercel KV (ë³´ë¼ìƒ‰ ì•„ì´ì½˜)
â”œâ”€â”€ Vercel Postgres
â””â”€â”€ Vercel Blob

í˜„ì¬ (2024ë…„ ë§~):
â”œâ”€â”€ Marketplace Integrations
â”‚   â”œâ”€â”€ Upstash for Redis (KV ì—­í• )
â”‚   â”œâ”€â”€ Redis (ì¼ë°˜ Redis í”„ë¡œí† ì½œ)
â”‚   â””â”€â”€ Neon (Postgres)
â”œâ”€â”€ Vercel Blob
â””â”€â”€ Edge Config
```

#### 3ë‹¨ê³„: Redis ìƒì„± ë° í™˜ê²½ ë³€ìˆ˜ í™•ì¸
```
ìƒì„±ëœ í™˜ê²½ ë³€ìˆ˜:
âœ… KV_REDIS_URL (Redis í”„ë¡œí† ì½œìš©)
âŒ KV_REST_API_URL (ì—†ìŒ - @vercel/kvê°€ í•„ìš”ë¡œ í•¨)
```

### í•´ê²° ë°©ë²•: Native Redis í´ë¼ì´ì–¸íŠ¸ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜

#### ì½”ë“œ ë³€ê²½

**Before** (`@vercel/kv` ì‚¬ìš©):
```typescript
import { kv } from '@vercel/kv';

export async function getTokens(): Promise<Tokens> {
    const tokens = await kv.get<Tokens>(TOKEN_KEY);
    return tokens;
}

export async function saveTokens(tokens: Tokens): Promise<void> {
    await kv.set(TOKEN_KEY, tokens);
}
```

**After** (`redis` íŒ¨í‚¤ì§€ ì‚¬ìš©):
```typescript
import { createClient } from 'redis';

let redisClient: ReturnType<typeof createClient> | null = null;

async function getRedisClient() {
    if (!redisClient) {
        redisClient = createClient({
            url: process.env.KV_REDIS_URL,
        });
        await redisClient.connect();
    }
    return redisClient;
}

export async function getTokens(): Promise<Tokens> {
    const client = await getRedisClient();
    const data = await client.get(TOKEN_KEY);
    return data ? JSON.parse(data) : fallback;
}

export async function saveTokens(tokens: Tokens): Promise<void> {
    const client = await getRedisClient();
    await client.set(TOKEN_KEY, JSON.stringify(tokens));
}
```

**í•µì‹¬ ì°¨ì´ì **:

| í•­ëª© | @vercel/kv | redis |
|------|-----------|-------|
| **í”„ë¡œí† ì½œ** | REST API | Redis Protocol |
| **í™˜ê²½ ë³€ìˆ˜** | `KV_REST_API_URL` | `KV_REDIS_URL` |
| **ì—°ê²° ê´€ë¦¬** | ìë™ | ìˆ˜ë™ (ì‹±ê¸€í†¤ íŒ¨í„´) |
| **ë°ì´í„° í˜•ì‹** | ìë™ ì§ë ¬í™” | ìˆ˜ë™ JSON.stringify |
| **ì„œë²„ë¦¬ìŠ¤ ìµœì í™”** | âœ… | âš ï¸ (ì—°ê²° í’€ë§ í•„ìš”) |

#### ì‹±ê¸€í†¤ íŒ¨í„´ì˜ ì¤‘ìš”ì„±

**ì™œ í•„ìš”í•œê°€?**
```
ì„œë²„ë¦¬ìŠ¤ í™˜ê²½ì—ì„œ ë§¤ ìš”ì²­ë§ˆë‹¤ ìƒˆ ì—°ê²° ìƒì„± ì‹œ:
  â†“
ì—°ê²° ì˜¤ë²„í—¤ë“œ ì¦ê°€
  â†“
Redis ì—°ê²° ìˆ˜ í•œë„ ì´ˆê³¼ ê°€ëŠ¥
  â†“
ì„±ëŠ¥ ì €í•˜ ë° ì—ëŸ¬ ë°œìƒ
```

**í•´ê²°ì±…**:
```typescript
// âœ… ì‹±ê¸€í†¤ íŒ¨í„´: í•œ ë²ˆë§Œ ì—°ê²°
let redisClient: ReturnType<typeof createClient> | null = null;

async function getRedisClient() {
    if (!redisClient) {
        redisClient = createClient({ url: process.env.KV_REDIS_URL });
        await redisClient.connect();
    }
    return redisClient; // ê¸°ì¡´ ì—°ê²° ì¬ì‚¬ìš©
}
```

### ì¶”ê°€ ë¬¸ì œ: Redis ì´ˆê¸°í™”

#### ë¬¸ì œ ë°œê²¬
```
ë°°í¬ ì„±ê³µ â†’ Redis ì—°ê²° ì„±ê³µ
í•˜ì§€ë§Œ:
  âœ… Redis client connected
  â„¹ï¸ Using tokens from environment variables (fallback)
  âŒ 500 Error: Missing credentials for token refresh
```

**ì›ì¸**: RedisëŠ” ë¹„ì–´ìˆìŒ! ì´ˆê¸° ë°ì´í„° ì—†ìŒ

#### í•´ê²°: ì´ˆê¸°í™” API ìƒì„±

```typescript
// src/app/api/init-tokens/route.ts
export async function POST() {
    const tokens = {
        access_token: process.env.CAFE24_ACCESS_TOKEN || '',
        refresh_token: process.env.CAFE24_REFRESH_TOKEN || '',
        expires_at: Date.now() + 2 * 60 * 60 * 1000,
    };
    
    await saveTokens(tokens);
    
    return NextResponse.json({ success: true });
}
```

**ì‚¬ìš©ë²•**:
```bash
# ë°°í¬ í›„ í•œ ë²ˆë§Œ ì‹¤í–‰
curl -X POST https://web-cadalog-ver10.vercel.app/api/init-tokens
```

### í™˜ê²½ ë³€ìˆ˜ ëŒ€ì†Œë¬¸ì ì´ìŠˆ

#### ë°œê²¬ëœ ë¬¸ì œ

Vercel í™˜ê²½ ë³€ìˆ˜ í™•ì¸ ê²°ê³¼:
```
âœ… CAFE24_ACCESS_TOKEN
âœ… CAFE24_REFRESH_TOKEN
âœ… CAFE24_CLIENT_SECRET
âœ… MALL_ID
âŒ cafe24_client_ID  â† ëŒ€ì†Œë¬¸ì ì˜¤ë¥˜!
```

**ì½”ë“œê°€ ì°¾ëŠ” ì´ë¦„**:
```typescript
const clientId = process.env.CAFE24_CLIENT_ID; // undefined!
```

**ì‹¤ì œ í™˜ê²½ ë³€ìˆ˜**:
```bash
cafe24_client_ID=xxx  # ì†Œë¬¸ì + ëŒ€ë¬¸ì í˜¼ìš©
```

#### ì˜í–¥

```
í† í° ê°±ì‹  ì‹œë„
  â†“
client_idë¥¼ ì°¾ì§€ ëª»í•¨
  â†“
"Missing credentials for token refresh"
  â†“
500 Error
```

#### í•´ê²° ë°©ë²•

**Vercel Dashboardì—ì„œ**:
1. `cafe24_client_ID` ê°’ ë³µì‚¬
2. í•´ë‹¹ ë³€ìˆ˜ ì‚­ì œ
3. `CAFE24_CLIENT_ID`ë¡œ ì¬ìƒì„± (ëª¨ë‘ ëŒ€ë¬¸ì)
4. ìë™ ì¬ë°°í¬ ëŒ€ê¸°
5. `/api/init-tokens` ì¬í˜¸ì¶œ

### êµí›ˆ ë° Best Practices

#### 1. í™˜ê²½ ë³€ìˆ˜ ë„¤ì´ë° ê·œì¹™

**ì¼ê´€ì„± ìœ ì§€**:
```bash
âœ… CAFE24_CLIENT_ID
âœ… CAFE24_CLIENT_SECRET
âœ… CAFE24_ACCESS_TOKEN
âœ… CAFE24_REFRESH_TOKEN

âŒ cafe24_client_ID  # í˜¼ìš© ê¸ˆì§€
âŒ Cafe24ClientId    # ì¹´ë©œì¼€ì´ìŠ¤ ì§€ì–‘
```

#### 2. Redis ì´ˆê¸°í™” ì²´í¬ë¦¬ìŠ¤íŠ¸

```
[ ] Redis ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
[ ] í™˜ê²½ ë³€ìˆ˜ ìë™ ì£¼ì… í™•ì¸ (KV_REDIS_URL)
[ ] ì½”ë“œì—ì„œ ì—°ê²° í…ŒìŠ¤íŠ¸
[ ] ì´ˆê¸° ë°ì´í„° ì €ì¥ (init API)
[ ] ì‹¤ì œ API í˜¸ì¶œë¡œ ê²€ì¦
```

#### 3. ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œ ì£¼ì˜ì‚¬í•­

**@vercel/kv â†’ redis ì „í™˜ ì‹œ**:
- [ ] íŒ¨í‚¤ì§€ ì„¤ì¹˜: `npm install redis`
- [ ] ì‹±ê¸€í†¤ íŒ¨í„´ êµ¬í˜„
- [ ] JSON ì§ë ¬í™”/ì—­ì§ë ¬í™” ì¶”ê°€
- [ ] í™˜ê²½ ë³€ìˆ˜ ë³€ê²½ (`KV_REST_API_URL` â†’ `KV_REDIS_URL`)
- [ ] ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”
- [ ] ì—°ê²° ì¢…ë£Œ ë¡œì§ (í•„ìš” ì‹œ)

#### 4. ë””ë²„ê¹… ì „ëµ

**ë¬¸ì œ ë°œìƒ ì‹œ ì²´í¬ ìˆœì„œ**:
```
1. Vercel Logs í™•ì¸
   â†“
2. í™˜ê²½ ë³€ìˆ˜ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
   â†“
3. í™˜ê²½ ë³€ìˆ˜ ì´ë¦„ ëŒ€ì†Œë¬¸ì í™•ì¸
   â†“
4. Redis ì—°ê²° ìƒíƒœ í™•ì¸
   â†“
5. Redis ë°ì´í„° ì¡´ì¬ ì—¬ë¶€ í™•ì¸
   â†“
6. í† í° ìœ íš¨ì„± í™•ì¸
```

### ì„±ëŠ¥ ë¹„êµ

#### ì‘ë‹µ ì‹œê°„ ì¸¡ì •

| ì‹œë‚˜ë¦¬ì˜¤ | @vercel/kv (REST) | redis (Protocol) |
|---------|-------------------|------------------|
| **Cold Start** | ~200ms | ~150ms |
| **Warm Start** | ~50ms | ~30ms |
| **ì—°ê²° ì˜¤ë²„í—¤ë“œ** | ì—†ìŒ (HTTP) | ì´ˆê¸° 1íšŒ (~100ms) |

**ê²°ë¡ **: 
- REST APIëŠ” ì—°ê²° ê´€ë¦¬ê°€ ì‰¬ì›€
- Redis Protocolì€ ì„±ëŠ¥ì´ ë” ì¢‹ìŒ (ì‹±ê¸€í†¤ ì‚¬ìš© ì‹œ)

### ë¹„ìš© ê³ ë ¤ì‚¬í•­

**Vercel Redis (Marketplace)**:
```
ë¬´ë£Œ í‹°ì–´:
- 30MB ì €ì¥ì†Œ
- 10,000 ëª…ë ¹/ì¼
- ê¸€ë¡œë²Œ ë³µì œ ì—†ìŒ

ìœ ë£Œ ($10/ì›”):
- 256MB ì €ì¥ì†Œ
- ë¬´ì œí•œ ëª…ë ¹
- ê¸€ë¡œë²Œ ë³µì œ
```

**ìš°ë¦¬ í”„ë¡œì íŠ¸ ì‚¬ìš©ëŸ‰**:
```
í† í° ì €ì¥: ~1KB
API í˜¸ì¶œ: ~100íšŒ/ì¼
ì˜ˆìƒ ë¹„ìš©: ë¬´ë£Œ í‹°ì–´ ì¶©ë¶„
```

---

## ğŸ“ í•µì‹¬ ë°°ìš´ ì  (Redis ë§ˆì´ê·¸ë ˆì´ì…˜)

### 1. ì„œë¹„ìŠ¤ ë³€ê²½ì— ëŒ€í•œ ëŒ€ì‘

**êµí›ˆ**: í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ëŠ” ì–¸ì œë“  ë³€ê²½ë  ìˆ˜ ìˆìŒ
- Deprecated ê²½ê³  ì£¼ì˜ ê¹Šê²Œ í™•ì¸
- ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ ìˆ™ì§€
- ëŒ€ì•ˆ ê¸°ìˆ  ìŠ¤íƒ íŒŒì•…

### 2. í™˜ê²½ ë³€ìˆ˜ì˜ ì¤‘ìš”ì„±

**ì‘ì€ ì‹¤ìˆ˜ê°€ í° ë¬¸ì œë¡œ**:
```
cafe24_client_ID vs CAFE24_CLIENT_ID
  â†“
ë‹¨ í•˜ë‚˜ì˜ ëŒ€ì†Œë¬¸ì ì°¨ì´
  â†“
ì „ì²´ API ì‹¤íŒ¨
```

### 3. ì´ˆê¸°í™”ì˜ í•„ìš”ì„±

**ë¹ˆ ë°ì´í„°ë² ì´ìŠ¤ â‰  ì‘ë™í•˜ëŠ” ì‹œìŠ¤í…œ**
- ì—°ê²° ì„±ê³µ â‰  ë°ì´í„° ì¡´ì¬
- ì´ˆê¸° ë°ì´í„° ì£¼ì… í•„ìˆ˜
- í—¬ìŠ¤ ì²´í¬ API í•„ìš”

### 4. ë””ë²„ê¹… ìŠ¤í‚¬

**íš¨ê³¼ì ì¸ ë¬¸ì œ í•´ê²° ìˆœì„œ**:
1. ë¡œê·¸ ë¶„ì„ (Vercel Logs)
2. í™˜ê²½ ë³€ìˆ˜ ê²€ì¦
3. ë°ì´í„° ì¡´ì¬ í™•ì¸
4. ë‹¨ê³„ë³„ ê²©ë¦¬ í…ŒìŠ¤íŠ¸

---

## 9ï¸âƒ£ ê²¬ì ì„œ ì¹´íƒˆë¡œê·¸ êµ¬í˜„ (2026-01-27)

### ë°°ê²½: ìˆ¨ê²¨ì§„ ì¹´í…Œê³ ë¦¬ ì¡°íšŒ ë¬¸ì œ

**ìš”êµ¬ì‚¬í•­**:
- Cafe24ì—ì„œ `(ê²¬ì ì„œ)` ì ‘ë¯¸ì‚¬ê°€ ë¶™ì€ ì¹´í…Œê³ ë¦¬ ì „ìš© ì¹´íƒˆë¡œê·¸ êµ¬í˜„
- ì˜ˆ: `ë‹¨ì—´ì¬(ê²¬ì ì„œ)`, `ì„ê³ ë³´ë“œ(ê²¬ì ì„œ)`

**ë¬¸ì œ ë°œê²¬**:
```
Cafe24 ê´€ë¦¬ì: 22ê°œ+ ëŒ€ë¶„ë¥˜ (ë‹¨ì—´ì¬(ê²¬ì ì„œ) í¬í•¨)
API ë°˜í™˜: 9ê°œ ì¹´í…Œê³ ë¦¬ë§Œ (ë‹¨ì—´ì¬(ê²¬ì ì„œ) ëˆ„ë½)
```

### ë¬¸ì œ ë¶„ì„ ê³¼ì •

#### 1ë‹¨ê³„: limit íŒŒë¼ë¯¸í„° ëˆ„ë½
```typescript
// ë¬¸ì œ: limit ì—†ì´ ê¸°ë³¸ê°’ë§Œ ë°˜í™˜
const response = await apiClient.get('/categories', {
  params: { depth: 1 }
});

// í•´ê²°: limit: 100 ì¶”ê°€
const response = await apiClient.get('/categories', {
  params: { depth: 1, limit: 100 }
});
```
**ê²°ê³¼**: 48ê°œ ì¹´í…Œê³ ë¦¬ ë°˜í™˜, í•˜ì§€ë§Œ ì—¬ì „íˆ `(ê²¬ì ì„œ)` ì¹´í…Œê³ ë¦¬ ì—†ìŒ

#### 2ë‹¨ê³„: í‘œì‹œì•ˆí•¨(display='F') ì„¤ì • ë°œê²¬

**ì‚¬ìš©ì í”¼ë“œë°±**:
> "ë‹¨ì—´ì¬(ê²¬ì ì„œ)" ì¹´í…Œê³ ë¦¬ì˜ í‘œì‹œ ìƒíƒœê°€ **í‘œì‹œì•ˆí•¨**ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆìŒ

**ì‹œë„í•œ í•´ê²°ì±…**:
```typescript
// display='F'ë¡œ ìˆ¨ê²¨ì§„ ì¹´í…Œê³ ë¦¬ ì¡°íšŒ ì‹œë„
const displayParam = type === 'quote' ? 'F' : 'T';
const response = await apiClient.get('/categories', {
  params: { depth: 1, limit: 100, display: displayParam }
});
```

**ê²°ê³¼**: ë¹ˆ ë°°ì—´ ë°˜í™˜ - Cafe24 APIê°€ `display` íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŒ

### ìµœì¢… í•´ê²°ì±…: ìˆ˜ë™ ì¹´í…Œê³ ë¦¬ ë“±ë¡

**Cafe24 API í•œê³„**:
- ìˆ¨ê²¨ì§„(í‘œì‹œì•ˆí•¨) ì¹´í…Œê³ ë¦¬ëŠ” APIë¡œ ì¡°íšŒ ë¶ˆê°€
- `display` íŒŒë¼ë¯¸í„°ê°€ í•„í„°ë¡œ ì‘ë™í•˜ì§€ ì•ŠìŒ

**í•´ê²° ë°©ë²•**: ê²¬ì ì„œ ì¹´í…Œê³ ë¦¬ë¥¼ ì„¤ì • íŒŒì¼ì— ìˆ˜ë™ ë“±ë¡

#### ì„¤ì • íŒŒì¼ ìƒì„±

```typescript
// src/config/quote-categories.ts
export interface QuoteCategory {
  category_no: number;
  category_name: string;      // Cafe24 ì „ì²´ ì´ë¦„
  display_name: string;       // í™”ë©´ í‘œì‹œìš© (ê²¬ì ì„œ ì œê±°)
  category_depth: number;     // ì¹´í…Œê³ ë¦¬ ê¹Šì´ (ëŒ€ë¶„ë¥˜ = 1)
}

export const QUOTE_CATEGORIES: QuoteCategory[] = [
  {
    category_no: 325,
    category_name: 'ë‹¨ì—´ì¬(ê²¬ì ì„œ)',
    display_name: 'ë‹¨ì—´ì¬',
    category_depth: 1,
  },
  {
    category_no: 326,
    category_name: 'ì„ê³ ë³´ë“œ(ê²¬ì ì„œ)',
    display_name: 'ì„ê³ ë³´ë“œ',
    category_depth: 1,
  },
];

export const QUOTE_CATEGORY_NOS = QUOTE_CATEGORIES.map(c => c.category_no);
```

#### API ë¼ìš°íŠ¸ ìˆ˜ì •

**ì¹´í…Œê³ ë¦¬ API** (`/api/categories`):
```typescript
if (type === 'quote') {
  // Cafe24 API ëŒ€ì‹  ì„¤ì • íŒŒì¼ì—ì„œ ë°˜í™˜
  return NextResponse.json({ categories: QUOTE_CATEGORIES });
}
```

**ìƒí’ˆ API** (`/api/products`):
```typescript
if (type === 'quote') {
  const categoryNos = category ? [Number(category)] : QUOTE_CATEGORY_NOS;

  // ê° ì¹´í…Œê³ ë¦¬ë³„ë¡œ ìƒí’ˆ ì¡°íšŒ
  const productPromises = categoryNos.map(catNo =>
    apiClient.get('/products', {
      params: { category: catNo, selling: 'T', limit: 100 },
      timeout: 10000,
    }).catch(() => ({ data: { products: [] } }))
  );

  const responses = await Promise.all(productPromises);
  // ì¤‘ë³µ ì œê±° ë° ì¹´í…Œê³ ë¦¬ëª… ë§¤í•‘...
}
```

#### ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •

**CategoryTabs**: `display_name` í•„ë“œ ì§€ì› ì¶”ê°€
```typescript
interface Category {
  category_no: number;
  category_name: string;
  display_name?: string;  // ì¶”ê°€
}

// ë Œë”ë§
{cat.display_name || cat.category_name}
```

**QuoteCatalog**: `category_depth` í•„í„°ë§ ìœ ì§€
```typescript
const categories = useMemo(() => {
  if (catData?.categories) {
    return catData.categories.filter((c: Category) => c.category_depth === 1);
  }
  return [];
}, [catData]);
```

### ì•„í‚¤í…ì²˜ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /quote í˜ì´ì§€                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ CategoryTabs    â”‚    â”‚ ProductList                     â”‚â”‚
â”‚  â”‚ - ì „ì²´          â”‚    â”‚ - í”„ë¦¬ë¯¸ì—„ ë‹¨ì—´ì¬ PFë³´ë“œ...      â”‚â”‚
â”‚  â”‚ - ë‹¨ì—´ì¬        â”‚    â”‚ - GSê±´ì„¤ ìì´ ì„ê³ ë³´ë“œ...        â”‚â”‚
â”‚  â”‚ - ì„ê³ ë³´ë“œ      â”‚    â”‚                                 â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                          â”‚
         â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /api/categories â”‚      â”‚ /api/products                   â”‚
â”‚ ?type=quote     â”‚      â”‚ ?type=quote&category=325        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì„¤ì • íŒŒì¼ì—ì„œ   â”‚      â”‚ ì¹´í…Œê³ ë¦¬ ë²ˆí˜¸ë¡œ Cafe24 API í˜¸ì¶œ â”‚
â”‚ ì§ì ‘ ë°˜í™˜       â”‚      â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                          â”‚
         â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ src/config/quote-categories.ts                              â”‚
â”‚ - category_no: 325, 326                                     â”‚
â”‚ - ìˆ˜ë™ ë“±ë¡ ë°©ì‹                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ìƒˆ ì¹´í…Œê³ ë¦¬ ì¶”ê°€ ë°©ë²•

**1ë‹¨ê³„**: Cafe24 ê´€ë¦¬ìì—ì„œ ì¹´í…Œê³ ë¦¬ ë²ˆí˜¸ í™•ì¸
```
https://daesan3833.cafe24.com/product/list.html?cate_no=XXX
                                                    â†‘
                                            ì¹´í…Œê³ ë¦¬ ë²ˆí˜¸
```

**2ë‹¨ê³„**: ì„¤ì • íŒŒì¼ì— ì¶”ê°€
```typescript
// src/config/quote-categories.ts
{
  category_no: 327,               // ì¹´í…Œê³ ë¦¬ ë²ˆí˜¸
  category_name: 'ìƒˆì¹´í…Œê³ ë¦¬(ê²¬ì ì„œ)',  // Cafe24 ì´ë¦„
  display_name: 'ìƒˆì¹´í…Œê³ ë¦¬',          // í™”ë©´ í‘œì‹œëª…
  category_depth: 1,
},
```

**3ë‹¨ê³„**: ì»¤ë°‹ & í‘¸ì‹œ â†’ Vercel ìë™ ë°°í¬

### í•µì‹¬ êµí›ˆ

#### 1. API í•œê³„ íŒŒì•…ì˜ ì¤‘ìš”ì„±

```
ê°€ì •: Cafe24 APIê°€ ìˆ¨ê²¨ì§„ ì¹´í…Œê³ ë¦¬ë„ ì¡°íšŒ ê°€ëŠ¥
í˜„ì‹¤: APIëŠ” í‘œì‹œì•ˆí•¨ ì¹´í…Œê³ ë¦¬ë¥¼ ë°˜í™˜í•˜ì§€ ì•ŠìŒ
í•´ê²°: API í•œê³„ë¥¼ ì¸ì •í•˜ê³  ëŒ€ì•ˆ ì„¤ê³„
```

#### 2. í•˜ì´ë¸Œë¦¬ë“œ ì ‘ê·¼ë²•

| ë°ì´í„° | ì†ŒìŠ¤ | ì´ìœ  |
|--------|------|------|
| **ì¹´í…Œê³ ë¦¬** | ì„¤ì • íŒŒì¼ | API ì¡°íšŒ ë¶ˆê°€ |
| **ìƒí’ˆ** | Cafe24 API | ì¹´í…Œê³ ë¦¬ ë²ˆí˜¸ë¡œ ì¡°íšŒ ê°€ëŠ¥ |

#### 3. í•„í„°ë§ ì¡°ê±´ ì¼ì¹˜

```typescript
// QuoteCatalog.tsx
categories.filter((c) => c.category_depth === 1)

// quote-categories.ts - ë°˜ë“œì‹œ category_depth í¬í•¨!
{ category_no: 325, ..., category_depth: 1 }
```

### ì»¤ë°‹ íˆìŠ¤í† ë¦¬

```
30671f6 fix: add category_depth to quote categories for filtering
bca0539 fix: add timeout and error logging for quote products API
a7f2a38 feat: ê²¬ì ì„œ ì¹´í…Œê³ ë¦¬ ìˆ˜ë™ ë“±ë¡ ë°©ì‹ìœ¼ë¡œ ë³€ê²½
8f0dd9c fix: fetch hidden categories/products for quote catalog
7989f23 fix: add limit parameter to categories API
```

---

## ğŸ“š ì¶”ê°€ ì°¸ê³  ìë£Œ

- [Vercel Storage Migration Guide](https://vercel.com/docs/storage/vercel-kv/migration)
- [Redis Node.js Client Docs](https://github.com/redis/node-redis)
- [Serverless Redis Best Practices](https://upstash.com/docs/redis/overall/serverlessbestpractices)
- [Cafe24 API Documentation](https://developers.cafe24.com/docs/en/api/admin/)
