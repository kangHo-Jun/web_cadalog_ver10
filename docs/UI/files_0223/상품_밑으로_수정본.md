# 문제 보고서 — 카테고리 클릭 시 상품이 하단으로 밀리는 현상 (수정본)

프로젝트: web-cadalog-ver10  
작성일: 2026-02-20  
상태: 수정 필요

---

## 1. 문제 정의

카테고리 클릭 시 상품 리스트가 교체되면서  
화면이 아래로 스크롤되어 리스트 하단에서 멈추는 현상.

> **목표: 웹이 아니라 네이티브 앱처럼 고정된 프레임 동작**

---

## 2. 원인 분석

### 원인 1. 전체 페이지 스크롤 구조
`body` 또는 최상위 wrapper가 스크롤을 담당 →  
리스트 길이가 길어지면 페이지 높이 증가 →  
React 재렌더링 시 브라우저가 자동으로 하단 이동

### 원인 2. Scroll Anchoring (Chrome 기본 동작)
브라우저가 DOM 변경 시 현재 위치를 유지하려는 보정 동작 수행 →  
`overflow-anchor` 기본값(auto) 때문에 스크롤이 하단으로 이동

### 원인 3. 잘못된 스크롤 호출
코드 내 `scrollIntoView`, `window.scrollTo` 등이 있을 경우 강제 이동 발생

---

## 3. 구조 개선안

### 3-1. 전체 페이지 스크롤 차단

`layout.tsx` 또는 최상위 wrapper:

```tsx
<div className="h-screen overflow-hidden">
```

### 3-2. 내부 리스트 영역만 스크롤 허용

`Phase1CatalogView.tsx` 또는 `ProductListPhase1.tsx`:

```tsx
<div className="flex-1 overflow-y-auto overscroll-none">
  {/* 상품 리스트 */}
</div>
```

### 3-3. Scroll Anchoring 비활성화

`globals.css`:

```css
html, body {
  overflow-anchor: none;
}
```

### 3-4. 카테고리 클릭 로직 점검

아래 코드가 있다면 제거:

```ts
// 제거 대상
window.scrollTo(...)
element.scrollIntoView(...)
router.push(...)
```

카테고리 클릭은 상태 변경만 수행:

```ts
// 유지
setActiveCategory(id)
```

---

## 4. 최종 구조 목표

```
[브라우저: h-screen overflow-hidden]
  └── [max-w-[900px] 중앙 컨테이너]
        ├── 사이드바 (고정)
        ├── Header (flex-shrink-0)
        └── Product List (flex-1, overflow-y-auto)
```

- 전체 페이지는 절대 스크롤되지 않음
- 리스트 영역 내부에서만 스크롤 발생
- 카테고리 클릭 시 화면 위치 유지

---

## 5. 수정 대상 파일

- `layout.tsx`
- `Phase1CatalogView.tsx`
- `ProductListPhase1.tsx`
- `globals.css`

⚠️ 기존 API / Redis 구조 변경 금지  
⚠️ 레이아웃 및 스크롤 구조 수정만 수행

---

## 6. 완료 체크리스트

- [ ] `h-screen overflow-hidden` 적용 확인
- [ ] `overflow-anchor: none` globals.css 적용 확인
- [ ] 리스트 내부 스크롤 (`overflow-y-auto`) 정상 작동
- [ ] 카테고리 클릭 시 화면 위치 유지 (튕김 없음)
- [ ] `scrollIntoView` / `window.scrollTo` 코드 제거 확인
- [ ] 모바일 / PC 환경 모두 테스트 완료
