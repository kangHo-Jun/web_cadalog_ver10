# 분류 구조 수정 기획서 (분류_수정.md)

## 1. 목표

현재 견적서 전용 정적 트리 구조(대분류 → 중분류 → 상품)를 제거하고

대분류 클릭 시
→ 부모상품 기준 테이블 출력
→ 클릭 시 옵션상품 노출

구조로 변경한다.

---

## 2. 기존 구조

- QUOTE_CATEGORIES 기반 정적 트리
- category_depth + parent_category_no 사용
- 중분류 클릭 후 상품 API 호출

---

## 3. 변경 구조

### 3.1 대분류 클릭

- 중분류 완전 제거
- 대분류(category_no) 기준으로 상품 API 호출
- 테이블에는 "부모상품"만 노출

---

## 4. 상품 구조 정의

### 4.1 부모상품 (Master)

조건:
- option_use = 'Y'
- product_code = 8자리 (예: P0000CHJ)
- 가격 없음

출력:
- 상품명
- 상품 기본 정보

같은 이름 여러 개일 경우 1개만 출력

---

### 4.2 아들상품 (Option)

조건:
- item_code 가 부모 product_code 를 prefix로 포함
  예: P0000CHJ000A

출력:
- 옵션명
- additional_price (옵션추가금액)
- 수량 선택
- 견적 담기

---

### 4.3 옵션 없는 상품

조건:
- option_use = 'N'

처리:
- 자기 자신을 아들상품처럼 출력
- 기본 price 사용

---

## 5. 데이터 처리 로직

if option_use === 'Y':
    group by product_code (8자리)
        parent 1개 생성
        child 배열 구성 (item_code prefix 기준)
else:
    단독 상품 처리

---

## 6. UI 구조 제안

### 6.1 기본 테이블

| 상품명 | 설명 | 선택 |
|--------|------|------|
| 부모상품명 | 요약 | ▼ |

### 6.2 클릭 시 Accordion 확장

▼ 부모상품
    - 옵션1 [가격] [수량] [견적]
    - 옵션2 [가격] [수량] [견적]
    - 옵션3 [가격] [수량] [견적]

옵션 없는 상품은 단일 항목으로 출력

---

## 7. 전환 핵심

- 서버 구조 유지
- 클라이언트 그룹핑 로직 수정
- 중분류 제거
- 상품 API 구조 변경 없음

---

작성일: 2026-02-12
